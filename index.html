<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cache-Cache-Clic</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        text-align: center;
        position: relative; /* Position relative pour centrer l'√©nigme */
        height: 100vh; /* Hauteur de la fen√™tre */
    }
    #enigme {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        font-weight: bold;
    }
    .cache-cache {
        position: absolute; /* Position al√©atoire sur la page */
        color: rgba(0, 0, 0, 0.1); /* Couleur grise semi-transparente */
        pointer-events: none; /* Permet aux clics de passer √† travers */
    }
    #infoBox {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
</style>
</head>
<body>

<div id="enigme">Cache-Cache-Clic</div>

<img src="information.png" alt="Information" id="infoButton" style="position: absolute; top: 10px; left: 10px; width: 30px; cursor: pointer;">

<div id="infoBox">
    <p>Cache-Cache-Clic... est une exposition sur et avec Internet qui se d√©couvre au gr√®s de vos recherches dans le b√¢timent de l'ESAD. A la place d'un plan d'exposition nous avons choisi une interface web pour vous mettre sur la piste. En suivant les instructions vous y trouverez des installations insitu et des tags NFC √† d√©coder avec votre smartphone pour acc√©der aux diff√©rents contenus. Enjoy üòõ</p>
    <p>Avec : Hind Abbaze, Anne-Sophie Fofana, Jolaine Kanda, Macha Frantskevich, Bastien Record, Emilie Retailleau, Lita Shin, Eda Tinmaz, Berk Ata T√ºrkyƒ±lmaz, Rita Lenore Viitkar, Val√©rie Yong.</p>
</div>

<script>
    let enigmePrecedente = '';
    let isFirstClick = false; // Pour d√©tecter le premier clic ou touch√©

    const delaiClic = 1000; // D√©lai en millisecondes
    const touchDelay = 1000; // D√©lai en millisecondes avant d'afficher l'√©nigme apr√®s un toucher

    const enigmes = [
        "Rendez-vous au rez de chauss√© ! au niveau des affiches entre la salle 6 et 7 pour d√©couvrir avec votre lecteur NFC de votre t√©l√©phone",
        "Vous n'√™tes pas loin",
        "Rendez-vous au rez de chauss√©, sur le mur du couloir de la salle 8, d√©couvrez moi avec votre lecteur NFC de votre t√©l√©phone",
        "Vous chauffez",
        "Vous √™tes ti√®des",
        "Rendez-vous au rez de chauss√© devant le miroir des toilettes pour un selfie inoubliable...",
        "Encore un petit effort",
        "Rendez-vous dans l'atelier vid√©o, vous y trouverez une affiche accroch√©e au mur, d√©codez √† l'aide de votre lecteur NFC",
        "Rendez-vous au 2√®me √©tage, dans la salle 211...",
        "Rendez-vous devant un poster A2 sur le mur pr√®s de la COOP",
        "Rendez-vous √† l'accueil au niveau des cartes de vistes, des pubs et des prospectus",
        "Encore cherchez encore",
        "Vous √™tes meilleur pour chercher des chocolats",

        // Ajoutez plus d'√©nigmes ici
    ];

    function getRandomEnigme() {
        let nouvelleEnigme = enigmes[Math.floor(Math.random() * enigmes.length)];
        // V√©rifier si la nouvelle √©nigme est la m√™me que la pr√©c√©dente
        while (nouvelleEnigme === enigmePrecedente) {
            nouvelleEnigme = enigmes[Math.floor(Math.random() * enigmes.length)];
        }
        enigmePrecedente = nouvelleEnigme;
        return nouvelleEnigme;
    }

    // Fonction pour obtenir une position al√©atoire √† l'int√©rieur de la zone visible de l'√©cran
    function getPositionInsideViewport() {
        const posX = Math.random() * (window.innerWidth - 100); // Ajustez la plage pour rester √† l'int√©rieur de l'√©cran
        const posY = Math.random() * (window.innerHeight - 100); // Ajustez la plage pour rester √† l'int√©rieur de l'√©cran
        return { x: posX, y: posY };
    }

    function afficherEnigme() {
        if (!isFirstClick) {
            const enigmeElement = document.getElementById('enigme');
            enigmeElement.innerText = "Suivez les instructions et d√©couvrez les projets qui se cachent dans l'√©cole"; // Message d'invitation au d√©but
            isFirstClick = true;
            return;
        }
        const enigmeElement = document.getElementById('enigme');
        enigmeElement.innerText = ''; // Effacer le message d'invitation
        const enigme = getRandomEnigme();
        enigmeElement.innerText = enigme;
        lireEnigme(enigme);

        // Ajouter les mots "cache-cache" du fond jusqu'au prochain clic ou touch√© de l'√©cran
        const intervalId = setInterval(() => {
            const cacheCacheText = document.createTextNode('cache-cache');
            const cacheCacheNode = document.createElement('div');
            cacheCacheNode.appendChild(cacheCacheText);
            cacheCacheNode.classList.add('cache-cache'); // Ajouter une classe pour le style CSS
            document.body.appendChild(cacheCacheNode);
            const { x, y } = getPositionInsideViewport(); // Obtenir une position al√©atoire √† l'int√©rieur de la zone visible
            cacheCacheNode.style.left = x + 'px';
            cacheCacheNode.style.top = y + 'px';
        }, 1000);

        // Arr√™ter d'ajouter les mots "cache-cache" lorsque le prochain clic est d√©tect√©
        document.addEventListener('click', () => {
            clearInterval(intervalId);
            // Supprimer tous les √©l√©ments avec la classe 'cache-cache'
            const cacheCacheElements = document.querySelectorAll('.cache-cache');
            cacheCacheElements.forEach(element => {
                document.body.removeChild(element);
            });
        });
    }

    function lireEnigme(enigme) {
        const speech = new SpeechSynthesisUtterance();
        speech.lang = 'fr-FR';
        speech.text = enigme;
        window.speechSynthesis.speak(speech);
    }

    // Afficher ou masquer les informations suppl√©mentaires
    document.getElementById('infoButton').addEventListener('click', function() {
        const infoBox = document.getElementById('infoBox');
        if (infoBox.style.display === 'none' || infoBox.style.display === '') {
            infoBox.style.display = 'block';
            // Ajouter un √©couteur d'√©v√©nements pour d√©tecter les clics sur la fen√™tre et masquer les informations lorsque vous cliquez en dehors de la bo√Æte d'informations
            window.addEventListener('click', detecterClicExterieur);
        } else {
            infoBox.style.display = 'none';
        }
    });

    // Fonction pour d√©tecter les clics √† l'ext√©rieur de la bo√Æte d'informations
    function detecterClicExterieur(event) {
        const infoBox = document.getElementById('infoBox');
        if (!infoBox.contains(event.target) && event.target !== document.getElementById('infoButton')) {
            infoBox.style.display = 'none';
            window.removeEventListener('click', detecterClicExterieur);
        }
    }

    let lastTouchTime = 0;

    // Lancer le jeu lorsque l'utilisateur clique ou touche l'√©cran
    document.addEventListener('click', () => {
        afficherEnigme();
    });
    document.addEventListener('touchstart', (event) => {
        const currentTime = new Date().getTime();
        const timeSinceLastTouch = currentTime - lastTouchTime;
        if (timeSinceLastTouch > touchDelay) {
            afficherEnigme();
        }
        lastTouchTime = currentTime;
    });

</script>

</body>
</html>
