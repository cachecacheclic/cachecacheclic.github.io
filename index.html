<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cache-Cache-Clic</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        text-align: center;
        position: relative; 
        height: 100vh; 
    }
    #enigme {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        font-weight: bold;
    }
    .cache-cache {
        position: absolute; 
        color: rgba(0, 0, 0, 0.1); 
        pointer-events: none; 
    }
    #infoBox {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
</style>
</head>
<body>

<div id="enigme">Cache-Cache-Clic</div>

<img src="information.png" alt="Information" id="infoButton" style="position: absolute; top: 10px; left: 10px; width: 30px; cursor: pointer;">

<div id="infoBox">
    <p>Cache-Cache-Clic... est une exposition sur et avec Internet qui se d√©couvre au gr√© de vos recherches dans le b√¢timent de l'ESAD. A la place d'un plan d'exposition, nous avons choisi une interface web pour vous mettre sur la piste. En suivant les instructions vous y trouverez des installations in situ et des tags NFC √† d√©coder avec votre smartphone pour acc√©der aux diff√©rents contenus. Enjoy üòõ</p>
    <p>Avec : Hind Abbaze, Anne-Sophie Fofana, Jolaine Kanda, Macha Frantskevich, Bastien Record, Emilie Retailleau, Lita Shin, Eda Tinmaz, Berk Ata T√ºrkyƒ±lmaz, Rita Lenore Viitkar, Val√©rie Yong.</p>
</div>

<script>
    let enigmePrecedente = '';
    let isFirstClick = false; // Pour d√©tecter le premier clic ou touch√©

    const delaiClic = 1000; // D√©lai en millisecondes
    const touchDelay = 1000; // D√©lai en millisecondes avant d'afficher l'√©nigme apr√®s un toucher

    const enigmes = [
        "Rendez-vous au rez-de-chauss√©e dans la salle de convivialit√© vous trouverez des lecteurs de paiement sur les distributeurs √† d√©coder avec votre lecteur NFC",
        "Vous n'√™tes pas loin",
        "Payez pour rentrer dans les toilettes du rez-de-chauss√©e",
        "Rendez-vous au fond du couloir du rez-de-chauss√©e, dans l'escalier qui monte au premier √©tage",
        "Vous chauffez",
        "Vous √™tes ti√®des",
        "Rendez-vous au rez-de-chauss√©e devant le miroir des toilettes pour un selfie inoubliable",
        "Rendez-vous au rez-de-chauss√©e dans la salle de convialit√©, sur la porte qui m√®ne dehors. D√©codez moi avec votre lecteur NFC pour participer √† un jeu concours",
        "Encore un petit effort",
        "Rendez-vous devant la COOP, vous trouverez un TPE ouvert 24h/24",
        "Rendez-vous au rez-de-chauss√©e, au niveau des affiches entre la salle 6 et 7 pour d√©couvrir ce qui se cache avec votre lecteur NFC de votre t√©l√©phone",
        "Rendez-vous au rez-de-chauss√©e, dans la salle convivialit√© un carnet s'y cache. Mettez-vous √† quatre pattes, vous trouverez un carnet √† d√©coder avec le lecteur NFC de votre t√©l√©phone",
        "Vous souhaitez obtenir les cracks adobe ? Rendez-vous en salle de convivialit√© au niveau des affiches. Un tag NFC est √† d√©coder",
        "Encore, cherchez encore",
        "Rendez-vous devant la biblioth√®que pour une petite pause musicale",
        "Rendez-vous sur le mur √† c√¥t√© de la COOP pour une petite pause musicale",
        "Rendez-vous dans le couloir qui m√®ne √† la salle d'infographie pour une petite pause musicale",
        "Rendez-vous dans la salle de convivialit√© √† c√¥t√© de la machine √† caf√© pour une petite pause musicale",
        "Rendez-vous dans les toilettes du RDC pour une petite pause musicale",
        "Rendez-vous vers la fontaine √† eau du rez-de-chauss√©e pour une petite pause musicale",
        "Rendez-vous dans le couloir entre la salle 9 et la salle 8 pour un quiz musical particulier",
        "Vous √™tes meilleur pour chercher des chocolats",
        "Vous cherchez √† obtenir Photoshop mais vous n'avez pas un sou ! Rendez-vous au premier √©tage en salle d'infographie, √† c√¥t√© de la porte vous trouverez un tag NFC √† d√©coder",
        "Rendez-vous au rez-de-chauss√©e, sur le mur du couloir de la salle 8, vous pourrez me d√©coder avec votre lecteur NFC",
        "Rendez-vous aux toilettes du rez-de-chauss√©e, vous y trouverez une affiche Disco, scannez la boule √† facettes qui porte des lunettes" ,
        "Rendez-vous dans l'escalier √† c√¥t√© de l'accueil entre le rez-de-chauss√©e et le premier √©tage",
        "A la recherche de futurs nouveaux amis ? Rendez-vous √† la COOP et demandez une carte",
        "Vol de donn√©es personnelles, rendez-vous en salle de convivialit√© vous y trouverez des mouchoirs",
        "A la recherche de futurs nouveaux amis ? Rendez-vous √† la COOP et demandez une carte",
        "Rendez-vous au premier √©tage en salle 103, retrouvez le bon NFC qui se cache pour acc√©der √† notre site web et gagner un cadeau",
        "Rendez-vous en salle de convivialit√©, approchez-vous des city screens, nous sommes surveill√©s faites attention √† vos grimaces, scannez le tag NFC",
        "Vous √™tes stress√© ? Vous voulez vous d√©tendre ? Rendez-vous au rez-de-chauss√©e au niveau des affiches coll√©es sur la machine √† caf√©. Scannez moi avec votre lecteur NFC",
        "Rendez-vous au rez-de-chauss√©e √† droite de la salle des professeurs. Pour jouer au jeu scannez le NFC",
        "Rendez-vous en salle 103, vous trouverez des cartes √† gratter sur la table (Net Art Scratch Lottery). Bonne chance !"
        
    ];

    function getRandomEnigme() {
        let nouvelleEnigme = enigmes[Math.floor(Math.random() * enigmes.length)];
        // V√©rifier si la nouvelle √©nigme est la m√™me que la pr√©c√©dente
        while (nouvelleEnigme === enigmePrecedente) {
            nouvelleEnigme = enigmes[Math.floor(Math.random() * enigmes.length)];
        }
        enigmePrecedente = nouvelleEnigme;
        return nouvelleEnigme;
    }

    
    function getPositionInsideViewport() {
        const posX = Math.random() * (window.innerWidth - 100); // Ajustez la plage pour rester √† l'int√©rieur de l'√©cran
        const posY = Math.random() * (window.innerHeight - 100); // Ajustez la plage pour rester √† l'int√©rieur de l'√©cran
        return { x: posX, y: posY };
    }

    function afficherEnigme() {
        if (!isFirstClick) {
            const enigmeElement = document.getElementById('enigme');
            enigmeElement.innerText = "Suivez les instructions et d√©couvrez les projets qui se cachent dans l'√©cole"; // Message d'invitation au d√©but
            isFirstClick = true;
            return;
        }
        const enigmeElement = document.getElementById('enigme');
        enigmeElement.innerText = ''; // Effacer le message d'invitation
        const enigme = getRandomEnigme();
        enigmeElement.innerText = enigme;
        lireEnigme(enigme);

        
        const intervalId = setInterval(() => {
            const cacheCacheText = document.createTextNode('cache-cache');
            const cacheCacheNode = document.createElement('div');
            cacheCacheNode.appendChild(cacheCacheText);
            cacheCacheNode.classList.add('cache-cache'); // Ajouter une classe pour le style CSS
            document.body.appendChild(cacheCacheNode);
            const { x, y } = getPositionInsideViewport(); // Obtenir une position al√©atoire √† l'int√©rieur de la zone visible
            cacheCacheNode.style.left = x + 'px';
            cacheCacheNode.style.top = y + 'px';
        }, 1000);

        
        document.addEventListener('click', () => {
            clearInterval(intervalId);
            // Supprimer tous les √©l√©ments avec la classe 'cache-cache'
            const cacheCacheElements = document.querySelectorAll('.cache-cache');
            cacheCacheElements.forEach(element => {
                document.body.removeChild(element);
            });
        });
    }

    function lireEnigme(enigme) {
        const speech = new SpeechSynthesisUtterance();
        speech.lang = 'fr-FR';
        speech.text = enigme;
        window.speechSynthesis.speak(speech);
    }

    
    document.getElementById('infoButton').addEventListener('click', function() {
        const infoBox = document.getElementById('infoBox');
        if (infoBox.style.display === 'none' || infoBox.style.display === '') {
            infoBox.style.display = 'block';
            
            window.addEventListener('click', detecterClicExterieur);
        } else {
            infoBox.style.display = 'none';
        }
    });

    
    function detecterClicExterieur(event) {
        const infoBox = document.getElementById('infoBox');
        if (!infoBox.contains(event.target) && event.target !== document.getElementById('infoButton')) {
            infoBox.style.display = 'none';
            window.removeEventListener('click', detecterClicExterieur);
        }
    }

    let lastTouchTime = 0;

   
    document.addEventListener('click', () => {
        afficherEnigme();
    });
    document.addEventListener('touchstart', (event) => {
        const currentTime = new Date().getTime();
        const timeSinceLastTouch = currentTime - lastTouchTime;
        if (timeSinceLastTouch > touchDelay) {
            afficherEnigme();
        }
        lastTouchTime = currentTime;
    });

</script>

</body>
</html>
